index.html
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>XAU/USD 証拠金シミュレーター（円換算・レート指定版）</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; max-width: 700px; margin: 20px auto; background: #f2f2f2; padding: 0 10px; }
  h2 { text-align: center; color: #333; font-size: 1.5em; }
  label { display: block; margin-top: 12px; font-weight: bold; color: #333; font-size: 1em; }
  input, select, button { margin-top: 5px; width: 100%; padding: 12px; font-size: 1em; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
  input:focus, select:focus { border-color: #007bff; outline: none; }
  button { background-color: #007bff; color: #fff; border: none; cursor: pointer; transition: 0.2s; }
  button:hover { background-color: #0056b3; }
  .result { margin-top: 20px; padding: 15px; border: 2px solid #007bff; background: #e6f0ff; border-radius: 8px; font-size: 1em; line-height: 1.5; word-wrap: break-word; }
  .required { color: red; }
  small { color: #666; font-weight: normal; font-size: 0.9em; }
  @media (max-width: 400px) {
    input, select, button { font-size: 0.95em; padding: 10px; }
    h2 { font-size: 1.3em; }
  }
</style>
</head>
<body>

<h2>XAU/USD 証拠金シミュレーター（円換算・レート指定版）</h2>

<label>純資産額 (円) <span class="required">*</span>
  <input type="number" id="capital" placeholder="例: 1000000">
</label>

<label>買い / 売り <span class="required">*</span>
  <select id="position">
    <option value="buy">買い</option>
    <option value="sell">売り</option>
  </select>
</label>

<label>最大レバレッジ <span class="required">*</span>
  <select id="leverage">
    <option value="1">1倍</option>
    <option value="2">2倍</option>
    <option value="5">5倍</option>
    <option value="10">10倍</option>
    <option value="25">25倍</option>
    <option value="50">50倍</option>
    <option value="100">100倍</option>
    <option value="200">200倍</option>
    <option value="500">500倍</option>
    <option value="1000">1000倍</option>
  </select>
</label>

<label>XAU/USD 現在レート (USD/oz) <span class="required">*</span>
  <input type="number" id="xauRate" placeholder="例: 1950.00" step="0.01">
</label>

<label>USD/JPY レート <span class="required">*</span>
  <input type="number" id="usdRate" placeholder="例: 153.00" step="0.01">
</label>

<label>取引数量 (ロット) <span class="required">*</span>
  <input type="number" id="lot" placeholder="例: 0.1" step="0.01">
</label>

<label>ロスカット証拠金維持率 (%) 
  <select id="marginRate">
    <option value="20">20%</option>
    <option value="30">30%</option>
    <option value="50" selected>50%</option>
    <option value="70">70%</option>
  </select>
</label>

<label>利確レート (USD/oz)
  <input type="number" id="takeProfitRate" placeholder="任意">
</label>

<label>損切りレート (USD/oz)
  <input type="number" id="stopLossRate" placeholder="任意">
</label>

<button type="button" onclick="calculate()">計算する</button>

<div class="result" id="result"></div>

<script>
function calculate() {
  const capitalJPY = parseFloat(document.getElementById("capital").value);
  const lot = parseFloat(document.getElementById("lot").value);
  const leverage = parseFloat(document.getElementById("leverage").value);
  const xauRate = parseFloat(document.getElementById("xauRate").value);
  const usdRate = parseFloat(document.getElementById("usdRate").value);
  const marginRate = parseFloat(document.getElementById("marginRate").value) / 100;
  const tpRate = parseFloat(document.getElementById("takeProfitRate").value);
  const slRate = parseFloat(document.getElementById("stopLossRate").value);
  const position = document.getElementById("position").value;

  if (!capitalJPY || !lot || !xauRate || !usdRate) {
    alert("必須項目を入力してください");
    return;
  }

  const contractSize = 100; // 1ロット = 100oz

  // 必要証拠金 (円)
  const marginUSD = (lot * contractSize * xauRate) / leverage;
  const marginJPY = marginUSD * usdRate;

  // ロスカット計算
  const maintenanceMargin = marginJPY * marginRate;
  let liquidationRate;
  if (position === "buy") {
    liquidationRate = xauRate - ((capitalJPY - maintenanceMargin) / usdRate) / (lot * contractSize);
  } else {
    liquidationRate = xauRate + ((capitalJPY - maintenanceMargin) / usdRate) / (lot * contractSize);
  }

  const result = [];
  result.push(`<b>必要証拠金:</b> ${marginJPY.toFixed(0)} 円`);
  result.push(`<b>合計必要証拠金:</b> ${marginJPY.toFixed(0)} 円`);
  result.push(`<b>ロスカットレート:</b> ${liquidationRate.toFixed(2)} USD/oz`);
  result.push(`<b>ロスカット損失:</b> ${(capitalJPY - maintenanceMargin).toFixed(0)} 円`);
  result.push(`<b>実効レバレッジ:</b> ${(lot * contractSize * xauRate * usdRate / capitalJPY).toFixed(2)} 倍`);

  if (!isNaN(tpRate)) {
    const profitJPY = position === "buy" ? (tpRate - xauRate) * lot * contractSize * usdRate : (xauRate - tpRate) * lot * contractSize * usdRate;
    result.push(`<b>利確利益:</b> ${profitJPY.toFixed(0)} 円`);
  }

  if (!isNaN(slRate)) {
    const lossJPY = position === "buy" ? (xauRate - slRate) * lot * contractSize * usdRate : (slRate - xauRate) * lot * contractSize * usdRate;
    result.push(`<b>損切り損失:</b> ${lossJPY.toFixed(0)} 円`);
  }

  document.getElementById("result").innerHTML = result.join('<br>');
}
</script>

</body>
</html>
