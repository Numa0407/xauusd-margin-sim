index.html
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>XAU/USD 証拠金シミュレーター（手動入力・スマホ対応）</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: 'Segoe UI', Arial, sans-serif; max-width: 650px; margin: 20px auto; background: #f2f2f2; padding: 0 10px; }
  h2 { text-align: center; color: #333; font-size: 1.5em; }
  label { display: block; margin-top: 12px; font-weight: bold; color: #333; font-size: 1em; }
  input, select, button { margin-top: 5px; width: 100%; padding: 12px; font-size: 1em; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
  input:focus, select:focus { border-color: #007bff; outline: none; }
  button { background-color: #007bff; color: #fff; border: none; cursor: pointer; transition: 0.2s; }
  button:hover { background-color: #0056b3; }
  .result { margin-top: 20px; padding: 15px; border: 2px solid #007bff; background: #e6f0ff; border-radius: 8px; font-size: 1em; line-height: 1.5; word-wrap: break-word; }
  .required { color: red; }
  small { color: #666; font-weight: normal; font-size: 0.9em; }
  @media (max-width: 400px) {
    input, select, button { font-size: 0.95em; padding: 10px; }
    h2 { font-size: 1.3em; }
  }
</style>
</head>
<body>

<h2>XAU/USD 証拠金シミュレーター</h2>

<label>純資産額 (USD) <span class="required">*</span>
  <input type="number" id="capital" placeholder="例: 10000">
</label>

<label>買い / 売り <span class="required">*</span>
  <select id="position">
    <option value="buy">買い</option>
    <option value="sell">売り</option>
  </select>
</label>

<label>最大レバレッジ <span class="required">*</span>
  <select id="leverage">
    <option value="1">1倍</option>
    <option value="2">2倍</option>
    <option value="5">5倍</option>
    <option value="10">10倍</option>
    <option value="25">25倍</option>
    <option value="50">50倍</option>
    <option value="100">100倍</option>
    <option value="200">200倍</option>
    <option value="500">500倍</option>
    <option value="1000">1000倍</option>
  </select>
</label>

<label>レート (USD) <span class="required">*</span>
  <input type="number" id="rateInput" placeholder="例: 1950.00" step="0.01">
  <small>XM USD口座想定</small>
</label>

<label>取引数量 (ロット) <span class="required">*</span>
  <input type="number" id="lot" placeholder="例: 0.1" step="0.01">
</label>

<label>ロスカット証拠金維持率 (%) 
  <select id="marginRate">
    <option value="20">20%</option>
    <option value="30">30%</option>
    <option value="50" selected>50%</option>
    <option value="70">70%</option>
  </select>
</label>

<label>利確 (pips)
  <input type="number" id="takeProfit" placeholder="任意">
</label>

<label>損切り (pips)
  <input type="number" id="stopLoss" placeholder="任意">
</label>

<button type="button" onclick="calculate()">計算する</button>

<div class="result" id="result"></div>

<script>
function calculate() {
  const capital = parseFloat(document.getElementById("capital").value);
  const lot = parseFloat(document.getElementById("lot").value);
  const leverage = parseFloat(document.getElementById("leverage").value);
  const rate = parseFloat(document.getElementById("rateInput").value);
  const marginRate = parseFloat(document.getElementById("marginRate").value);
  const tp = parseFloat(document.getElementById("takeProfit").value);
  const sl = parseFloat(document.getElementById("stopLoss").value);

  if (!capital || !lot || !rate) {
    alert("必須項目を入力してください");
    return;
  }

  const contractSize = 100; // XAUは100oz/lot
  const requiredMargin = (lot * contractSize * rate) / leverage;
  const totalMargin = requiredMargin;
  const maintenanceRate = marginRate / 100;
  const maintenanceMargin = totalMargin * maintenanceRate;

  const position = document.getElementById("position").value;
  let liquidationRate, liquidationLoss;
  if (position === "buy") {
    liquidationRate = rate - (capital - maintenanceMargin) / (lot * contractSize);
    liquidationLoss = capital - maintenanceMargin;
  } else {
    liquidationRate = rate + (capital - maintenanceMargin) / (lot * contractSize);
    liquidationLoss = capital - maintenanceMargin;
  }

  let resultText = `
    <b>必要証拠金:</b> ${requiredMargin.toFixed(2)} USD<br>
    <b>合計必要証拠金:</b> ${totalMargin.toFixed(2)} USD<br>
    <b>維持率100%レート:</b> ${rate.toFixed(2)} USD<br>
    <b>維持率100%損失:</b> ${capital.toFixed(2)} USD<br>
    <b>ロスカットレート:</b> ${liquidationRate.toFixed(2)} USD<br>
    <b>ロスカット損失:</b> ${liquidationLoss.toFixed(2)} USD<br>
    <b>レバレッジ:</b> ${leverage}倍
  `;

  if (!isNaN(tp)) {
    const profit = lot * contractSize * (tp / 0.01);
    resultText += `<br><b>利確pips利益:</b> ${profit.toFixed(2)} USD`;
  }

  if (!isNaN(sl)) {
    const loss = lot * contractSize * (sl / 0.01);
    resultText += `<br><b>損切りpips損失:</b> ${loss.toFixed(2)} USD`;
  }

  document.getElementById("result").innerHTML = resultText;
}
</script>

</body>
</html>
